<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>the art of soccer economics</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
      </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">My new website</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="./aboutme.html">About me</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Project
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="./project1.html">Project part 1</a>
    </li>
    <li>
      <a href="./project2.html">Project part 2</a>
    </li>
  </ul>
</li>
<li>
  <a href="./contact.html">Contact</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://simplelife2609.github.io/MyFirstWebsite/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">the art of soccer economics</h1>

</div>


<p><br></p>
<div id="introduction" class="section level2">
<h2>introduction</h2>
<p>For my first project I turn to a familiar topic - soccer. Since my childhood I am passionate about soccer. I played in several teams, trained some kids, tracked nearly every game in the highest european divisions and discussed a lot with friends about games and transfers. So I am pretty sure to know everything about this sport. But do my knowledge hold against the raw data?<br />
In this project I want to test some general hypothesis and check I the data confirm or contradict my view on soccer. On the following pages I will first introduce the data, then state my hypothesis and finally check if the data support my hypothesis.</p>
</div>
<div id="show-me-the-data" class="section level2">
<h2>show me the data</h2>
<p>I found the datasets on GitHub<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>. A User provides the results of the german Bundesliga, with matchday number, matchday date, teams and result. I add a factor variable with levels 1 to 3 that states the result as 'Draw', 'HomeVictory' and 'AwayVictory', as well as two integer variables for the goals. At least I add another dummy variable that states if the victory of a team was narrow, means a victory by one goal difference. The summary statistics of the datasets looks as follows. Sadly we could not get much valueable information out of this first summary. Therefore, we now have to perfom some statistics.</p>
<pre class="r"><code>season1920$Team.1Goals &lt;- as.integer(sub(&quot;-.*&quot;, &quot;&quot;, season1920$FT)) 
season1920$Team.2Goals &lt;- as.integer(sub(&quot;*.-&quot;, &quot;&quot;, season1920$FT)) 
season1920$result &lt;- factor(ifelse(season1920$Team.1Goals==season1920$Team.2Goals,0,
       ifelse(season1920$Team.1Goals&gt;season1920$Team.2Goals,1,2)),levels=c(0,1,2), labels=c(&quot;Draw&quot;,&quot;HomeVictory&quot;,&quot;AwayVictory&quot;))
season1920$narrowVict &lt;-factor(ifelse(abs(season1920$Team.1Goals-season1920$Team.2Goals)==1,1,0))
summary(season1920)</code></pre>
<pre><code>##      Round          Date              Team.1               FT           
##  Min.   : 1.0   Length:306         Length:306         Length:306        
##  1st Qu.: 9.0   Class :character   Class :character   Class :character  
##  Median :17.5   Mode  :character   Mode  :character   Mode  :character  
##  Mean   :17.5                                                           
##  3rd Qu.:26.0                                                           
##  Max.   :34.0                                                           
##     Team.2           Team.1Goals    Team.2Goals            result    narrowVict
##  Length:306         Min.   :0.00   Min.   :0.000   Draw       : 68   0:210     
##  Class :character   1st Qu.:1.00   1st Qu.:1.000   HomeVictory:123   1: 96     
##  Mode  :character   Median :1.00   Median :1.000   AwayVictory:115             
##                     Mean   :1.66   Mean   :1.549                               
##                     3rd Qu.:2.00   3rd Qu.:2.000                               
##                     Max.   :8.00   Max.   :6.000</code></pre>
</div>
<div id="descriptive-statistics" class="section level2">
<h2>descriptive statistics</h2>
<p>For all that can't remember preciously about the season I reproduce the final table. Using the aggregate function and ordering the result descending gives the following ranking. Like every year the Bayern won the league and qualified for the champions league. Dortmund, Liepzig and Gladbach also qualified for the champions league. Paderborn and Düsseldorf had to go to the 2. Bundesliga and Bremen keep the class in relegation. There is one small mistake in the table. Can you spot and correct it?</p>
<pre class="r"><code>season1920$Team.1Points &lt;- ifelse(season1920$Team.1Goals&gt;season1920$Team.2Goals,3,
                                  ifelse(season1920$Team.1Goals==season1920$Team.2Goals,
                                         1,0))
season1920$Team.2Points &lt;- ifelse(season1920$Team.1Goals&lt;season1920$Team.2Goals,3,
                                  ifelse(season1920$Team.1Goals==season1920$Team.2Goals,
                                         1,0))
finalTableHome &lt;- aggregate(x=season1920[, c(6,7,10)], by=list(season1920$Team.1),
                            FUN=sum)
colnames(finalTableHome) &lt;-c(&quot;Team&quot;, &quot;GoalsScored&quot;, &quot;GoalsAgainst&quot;, &quot;Points&quot;)
finalTableAway &lt;- aggregate(x=season1920[, c(6,7,11)], by=list(season1920$Team.2),
                            FUN=sum)
colnames(finalTableAway) &lt;-c(&quot;Team&quot;, &quot;GoalsAgainst&quot;, &quot;GoalsScored&quot;, &quot;Points&quot;)
finalTableAway &lt;- finalTableAway[ ,c(1, 3, 2, 4)] 
finalTable &lt;- rbind(finalTableHome, finalTableAway)
finalTable &lt;- aggregate(x=finalTable[, c(2,3,4)], by=list(finalTable$Team),
                        FUN=sum)
colnames(finalTable) &lt;-c(&quot;Team&quot;, &quot;GoalsScored&quot;, &quot;GoalsAgainst&quot;, &quot;Points&quot;)
finalTable &lt;- finalTable[order(finalTable$Points, decreasing = TRUE),]
rownames(finalTable) &lt;- 1:18
print(finalTable)</code></pre>
<pre><code>##                    Team GoalsScored GoalsAgainst Points
## 1        Bayern München         100           32     82
## 2     Borussia Dortmund          84           41     69
## 3            RB Leipzig          81           37     66
## 4  Bor. Mönchengladbach          66           40     65
## 5   Bayer 04 Leverkusen          61           44     63
## 6   TSG 1899 Hoffenheim          53           53     52
## 7         VfL Wolfsburg          48           46     49
## 8           SC Freiburg          48           47     48
## 9   Eintracht Frankfurt          59           60     45
## 10   1. FC Union Berlin          41           58     41
## 11           Hertha BSC          48           59     41
## 12        FC Schalke 04          38           58     39
## 13      1. FSV Mainz 05          44           65     37
## 14           1. FC Köln          51           69     36
## 15          FC Augsburg          45           63     36
## 16        Werder Bremen          42           69     31
## 17   Fortuna Düsseldorf          36           67     30
## 18      SC Paderborn 07          37           74     20</code></pre>
<p>Now we want to know if their are teams that perform significantly better at home than on the opponents pitch. Therefore, we compare gained points from the home and away table. It seems that teams on the upper half of the table have highly different results at home and away why teams on the margins make nearly the same amount of points at home and away. Only Bremen seems to be an exception from this finding. The question is if this result is by chance or might there be an explanation for this finding. I will load more data, namely the seasons from 2016 until 2018 and look for a similar effect.</p>
<pre class="r"><code>colnames(finalTableHome) &lt;-c(&quot;Team&quot;, &quot;GoalsScored&quot;, &quot;GoalsAgainst&quot;, &quot;PointsHome&quot;)
colnames(finalTableAway) &lt;-c(&quot;Team&quot;, &quot;GoalsScored&quot;, &quot;GoalsAgainst&quot;, &quot;PointsAway&quot;)
finalTable &lt;- merge(finalTable, finalTableHome[,c(1,4)], by=&quot;Team&quot;)
finalTable &lt;- merge(finalTable, finalTableAway[,c(1,4)], by=&quot;Team&quot;)
finalTable &lt;- finalTable[order(finalTable$Points, decreasing = TRUE),]
finalTable$Diff &lt;- finalTable$PointsHome - finalTable$PointsAway
rownames(finalTable) &lt;- 1:18
print(finalTable[ ,c(1,4,5,6,7)])</code></pre>
<pre><code>##                    Team Points PointsHome PointsAway Diff
## 1        Bayern München     82         41         41    0
## 2     Borussia Dortmund     69         36         33    3
## 3            RB Leipzig     66         29         37   -8
## 4  Bor. Mönchengladbach     65         38         27   11
## 5   Bayer 04 Leverkusen     63         31         32   -1
## 6   TSG 1899 Hoffenheim     52         22         30   -8
## 7         VfL Wolfsburg     49         19         30  -11
## 8           SC Freiburg     48         29         19   10
## 9   Eintracht Frankfurt     45         28         17   11
## 10   1. FC Union Berlin     41         27         14   13
## 11           Hertha BSC     41         21         20    1
## 12        FC Schalke 04     39         22         17    5
## 13      1. FSV Mainz 05     37         17         20   -3
## 14           1. FC Köln     36         22         14    8
## 15          FC Augsburg     36         20         16    4
## 16        Werder Bremen     31          9         22  -13
## 17   Fortuna Düsseldorf     30         18         12    6
## 18      SC Paderborn 07     20          8         12   -4</code></pre>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p><a href="https://github.com/jokecamp/FootballData/tree/master/Germany" class="uri">https://github.com/jokecamp/FootballData/tree/master/Germany</a><a href="#fnref1">↩</a></p></li>
</ol>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
